<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="utf-8" />
    <title>Usage Detail #{{ record.id }}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; margin: 0; padding: 24px; background:#f4f4f5; color:#111827; }
      h1 { margin-top:0; }
      .meta { display:grid; gap:0.5rem; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); margin-bottom:1.5rem; }
      .meta div { background:#fff; border-radius:12px; padding:0.75rem; box-shadow:0 1px 2px rgba(0,0,0,0.08); }
      .section { margin-bottom:1.5rem; }
      pre { background:#111827; color:#f9fafb; padding:1rem; border-radius:12px; overflow:auto; font-size:0.85rem; white-space:pre-wrap; word-break:break-word; }
      a.back { display:inline-block; margin-bottom:1rem; color:#2563eb; text-decoration:none; }
      @media (prefers-color-scheme: dark) {
        body { background:#0f172a; color:#f9fafb; }
        .meta div { background:#1e293b; box-shadow:none; }
        pre { background:#0b1120; }
      }
    </style>
  </head>
  <body>
    <a class="back" href="/usage/llm/view">&larr; 返回列表</a>
    <h1>LLM 使用紀錄 #{{ record.id }}</h1>
    <div class="meta">
      <div><strong>時間</strong><br />{{ record.timestamp }}</div>
      <div><strong>Device</strong><br />{{ record.device_id or '-' }}</div>
      <div><strong>Route</strong><br />{{ record.route or '-' }}</div>
      <div><strong>Model</strong><br />{{ record.model }}</div>
      <div><strong>Tokens (in/out/total)</strong><br />{{ record.input_tokens }}/{{ record.output_tokens }}/{{ record.total_tokens }}</div>
      <div><strong>Latency (ms)</strong><br />{{ '%.2f'|format(record.latency_ms or 0) }}</div>
      <div><strong>Status</strong><br />{{ record.status_code or '-' }}</div>
      <div><strong>成本 USD</strong><br />{{ '%.6f'|format(record.cost_total or 0) }}</div>
    </div>

    <div class="section">
      <h2>Request Payload</h2>
      <pre>{{ request_pretty }}</pre>
    </div>

    <div class="section">
      <h2>Response Payload</h2>
      <pre>{{ response_pretty }}</pre>
    </div>
  </body>
</html>
